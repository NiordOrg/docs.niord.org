
:imagesdir: images

== Firing Schedules

The _Firing Schedules_ page allows a system administrator to configure one or more firing schedules
in Niord.

image::FiringSchedulesPage.png[Firing Schedules, 400]

=== Firing Exercises System Setup

Before configuring a schedule on the _Firing Schedules_ system admin page, the Niord system must be
configured with the proper firing areas base data and the domains for firing areas and exercises.

The overarching idea is as follows:

. Firing areas must be defined as base data on the Admin
  http://docs.niord.org/admin-manual/manual.html#areas[Areas] page.
  Each firing area implicitly has an associated firing schedule.
. In a separate domain, "Firing Areas", editors will create a _Miscellaneous NM_ message for each firing
  area, which provides details about the firing area, contact information, signals, prohibition, etc.
. The "Firing Areas" domain also has a special "Schedule" sub-page that provides a UI for easily
  scheduling firing exercises per firing area.
. The firing area messages and firing area schedule will be combined to create firing exercise
  _Local Warning_ messages in a separate domain, "Firing Exercises".

The schedules configured on the _Firing Schedules_ system admin page provide the underlying engine
that generates firing exercise message based on firing areas and firing area schedules.

The steps outlined above are described in more details below.

==== Configuring Firing Area Base Data

image::FiringArea.png[Firing Areas, 600]

Administrators must define all firing practice areas in the country on the Admin
http://docs.niord.org/admin-manual/manual.html#areas[Areas] page. Each of these areas should
have their type set to "Firing area". This will trigger that a firing schedule can be associated
with the areas.

==== Create a Firing Areas Domain

There should be a separate domain, e.g. "Firing Areas", where editors should create
_Miscellaneous NM_ messages for each firing area.

image::FiringAreaMessages.png[Firing Area Messages, 600]

The messages should provide details about the firing areas, contact information, signals, prohibition, etc.

TIP: A common task for Notices to Mariners departments is to publish a yearly publication with
     firing practice areas.
     The message list of the "Firing Areas" domain is ideally suited to form the basis for one such publication.
     The publication can be defined as described in the
     http://docs.niord.org/admin-manual/manual.html#publications[Publications] chapter of the administrator
     manual. Indeed, Niord ships with a report, "fa-list", that can be used for this publication.

==== Maintain Firing Exercise Schedule

Once everything has been configured, a new sub-page, "Schedule", will become available in the
"Firing Areas" domain:

image::FiringAreaSchedule.png[Firing Area Schedule, 600]

Editors can maintain the firing exercise schedule on this page.
Firstly, they select a date in the _Schedule Date_ field. The firing practice schedule of that date
will be displayed below for all available firing areas.

The editor can add and modify the firing period for a given area by clicking the pencil symbol next
to the area.

Clicking the "Update Firing Exercises" button will directly update firing exercise messages from
the updated schedule. This operation is also called periodically by the system.

==== Generating Firing Exercises

Once everything has been configured, the firing area messages and firing exercise schedule maintained
in the "Firing Areas" domain will be combined to created firing exercise messages in a new domain,
e.g. "Firing Exercises".

No editor should have access rights to edit messages in the "Firing Exercises" domain, since these
are generated by the system.


=== Adding or Editing a Firing Schedule

A prerequisite for the firing exercise-generating mechanism to work, and for the schedule page
to become available in the "Firing Areas" domain, is that a firing schedule has been defined
on the _Firing Schedules_ system admin page.

The sysadmin can add a new schedule by clicking the "New Firing Schedule" button, or edit an existing
schedule by clicking the pencil symbol next to the schedule.

This will open the _Firing Schedule Edit Page_:

image::FiringScheduleEditPage.png[Firing Schedule Editor Page, 600]

The schedule attributes:

[ cols="30,70", options="header" ]
|===
| Schedule Attribute
| Description

| Domain
| The domain that is used for maintaining the firing area messages. The domain selected in this
  field will automatically sport a "Schedule" page, used for maintaining the firing schedule
  as described above.

| Target Domain
| The target domain, where the generated firing exercise messages will be created.

| Target Message Series
| The message series of the target domain, that will be assigned to the generated firing exercise messages.

| Schedule Days
| The number of days into the future that will be included in the generated firing exercises.

| Active
| Firing exercise messages will be created automatically only when the _Active_ flag is checked.

|===


=== Deleting a Firing Schedule

A firing schedule can be deleted by clicking the trash icon next to them.
