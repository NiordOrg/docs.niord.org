
:imagesdir: images

== Coding Conventions

Niord is fairly consistent about using naming and coding conventions, and understanding these conventions
makes it easier to read the code.

Each _logical entity_ of Niord, such as an _area_, a _chart_, a _message_ or a _publication_, is
implemented using JPA entities, JSON-serializable value objects, business logic, REST interfaces, and
batch import classes.

=== Area Example

As an example, consider the _Area_ entity, which represents a specific area in the Areas tree. The classes used
to implement areas, can be seen below:

image::PackageStructure.png[Package Structure, 300]

The classes are spread across three niord sub-projects:

[cols="20,80",options="header"]
|===
|Projects|Description

| https://github.com/NiordOrg/niord/tree/master/niord-model[niord-model]
| Contains the link:../model/model.html[Niord Message Model]. The message model is made up of
  value objects. +
  Third-party application can define a dependency on this project if they integrate with Niord via
  the link:../public-api/api.html[Public REST API].

| https://github.com/NiordOrg/niord/tree/master/niord-core[niord-core]
| Contains the actual entity classes and business logic (session beans). +
  May also define system model value objects, in as much as these may extend the niord-model classes.

| https://github.com/NiordOrg/niord/tree/master/niord-web[niord-web]
| Contains the JAX-RS REST interface used by clients (such as the Niord web application) to access the
  entities and execute business logic.

|===


==== Classes and Naming Conventions

[cols="30,70",options="header"]
|===
|Classes|Description

| +AreaVo+
| The link:../model/model.html[Niord Message Model] representation of an area. +
  The +Vo+ suffix is used for all _value objects_, which are essentially JSON-serializable
  versions of the real entities.

| +AreaDescVo+
| Almost all entities in Niord are localizable to any number of languages. As can be seen from the
  link:../model/model.html[Niord Message Model], this is implemented by associating an entity, such
  as +AreaVo+, with a list of classes that contain a language code and all localizable attributes.
  These associated entities have a +Desc+ suffix, as in +AreaDescVo+.

| +Area+
| The JPA entity definition of an area. +
  Whereas there will be a strong correlation between the attributes of the +Area+ entity and the +AreaVo+
  value object, the entity class may define additional attributes, which are not part of the
  public niord-model class. The entity class thus constitutes a _system model_.

| +AreaDesc+
| The JPA entity definition of the area description entity, i.e. the localizable attributes of an area.

| +SystemAreaVo+
| When a _system model_ entity, such as +Area+, contains attributes not included in the value objects
  of the link:../model/model.html[Niord Message Model], then a value object with a +System+ prefix
  is introduced to capture the additional attributes. +
  As such, +SystemAreaVo+ will extend +AreaVo+ and includes the additional attributes.

| +AreaService+
| Each entity will have a companion stateless session bean or singleton EJB, with a +Service+ suffix.
  This class defines the business logic and life-cycle management functions of the entity.

| +BatchAreaImportReader+ +
  +BatchAreaImportProcessor+ +
  +BatchAreaImportWriter+
| Many of the Niord model entities have an associated batch job for importing the entities. +
  The batch job is typically implemented using the Java EE batch API, and the three phases
  will be implemented by classes that have a +Batch+ prefix and the +Reader+, +Processor+ and +Writer+
  suffixes respectively.

| +AreaRestService+
| Each Niord entity will also be associated with a JAX-RS REST interface. +
  This interface is typically a thin wrapper on top of the service interface, and will have the
  +RestService+ suffix. +
  The REST interface also performs all the security and permission checks used to protect the
  Niord system.

|===

